{% extends 'base.html.twig' %}

{% block body %}
<div class="container-fluid">
    <div class="mb-4 bg-dark rounded p-2 border">
{#        <a href="{{ path('app_repair_new') }}" role="button" class="btn btn-success">Create new</a>#}
        <a href="#" role="button" class="btn btn-secondary">Repair Items</a>
    </div>
    <div class="dataTables_wrapper dt-bootstrap4">
        <div class="row">
            <div class="col-sm-12">
                <table id="repairTable" class="table table-bordered table-striped dataTable dtr-inline display" style="width:100%;" aria-describedby="repairTable_info">
                    <thead>
                        <tr>
                            <th>Asset</th>
                            <th>Created Date</th>
                            <th>Started Date</th>
                            <th>Technician</th>
                            <th>Issue</th>
                            <th>Parts Needed</th>
                            <th>Status</th>
                            <th>Last Modified Date</th>
                            <th>actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for repair in repairs %}
                            <tr>
                                <td>{{ repair.assetUniqueIdentifier }}</td>
                                <td>{{ repair.createdDate ? repair.createdDate|date('Y-m-d H:i:s') : '' }}</td>
                                <td>{{ repair.startedDate ? repair.startedDate|date('Y-m-d H:i:s') : '' }}</td>
                                <td>{{ repair.technicianId }}</td>
                                <td>{{ repair.issue }}</td>
                                <td>{{ repair.partsNeeded ? repair.partsNeeded|join(', ') : '' }}</td>
                                <td>{{ repair.status }}</td>
                                <td>{{ repair.lastModifiedDate ? repair.lastModifiedDate|date('Y-m-d H:i:s') : '' }}</td>
                                <td
                                    class="align-middle text-center">

                                    <a role="button" class="btn btn-sm btn-secondary" href="{{ path('app_repair_show', {'id': repair.id}) }}">Edit</a>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('datatables') }}
    <!-- Popper Js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>

    {# <script src="{{ asset('bundles/hierarchy-select/hierarchy-select.min.js') }}"></script> #}
    <!-- DataTables  & Plugins -->
    {# <script charset="utf8" src="{{ asset('bundles/DataTables/datatables.min.js') }}"></script> #}
    <script type="text/javascript">
        $(document).ready(function() {
            // Set the DataTable
            var table = $('#repairTable').DataTable({
                buttons: ["copy", "csv", "excel", "pdf", "print", "colvis"],
                scrollX: true,
                paging: true,
                lengthChange: true,
                iDisplayLength: 25,
                searching: true,
                ordering: true,
                columnDefs: [
                    {orderable: false, targets: 8}
                ],
                info: true,
                autoWidth: true,
                responsive: true,
                autoFill: true,
                colReorder: true,
            });

            // table.buttons().container()
            //     .appendTo($('.col-sm-12:eq(0)', table.table().container()));
        });
    </script>
{% endblock %}
{% block optional_javascript %}{% endblock %}
