{% extends 'base.html.twig' %}

{% block body %}
    {# Checkout buttons #}
    <a href="{{ path('app_asset_distribution') }}" class="btn btn-app">
        <i class="fas fa-right-from-bracket"></i>
        Distribute Asset
    </a>
    <a href="{{ path('app_distribute_revoke') }}" class="btn btn-app">
        <i class="fas fa-rectangle-list"></i>
        Distribution History/Revoke
    </a>
    <a href="{{ path('app_asset_distribution_roulette') }}" class="btn btn-app">
        <i class="fas fa-diagram-next"></i>
        Roulette
    </a>
    {# End checkout buttons #}
    <div id="rouletteWrapper">
        <ul class="list-group text-center">
            {% for asset in assets %}
                <li class="list-group-item">
                    {% if loop.first %}
                        <h1><a href="{{ path('app_distribute_clear', {'id': asset.id}) }}">{{ asset.location ?: 'No Location' }}</a></h1>
                    {% else %}
                        <h4><a href="{{ path('app_distribute_clear', {'id': asset.id}) }}">{{ asset.location ?: 'No Location' }}</a></h4>
                    {% endif %}
                    {{ asset.assettag }}<br />
                    {{ asset.userSurname }}, {{ asset.userFirstName }}
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript">
        $(document).ready(function() {
            let timeout = setInterval(reloadRouletteWrapper, 2000);
            function reloadRouletteWrapper() {
                $('#rouletteWrapper').load(window.location.href + " #rouletteWrapper");
            }
        });
    </script>
{% endblock %}
