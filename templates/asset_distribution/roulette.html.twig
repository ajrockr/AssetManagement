{% extends 'layout.html.twig' %}
{% block title %}Asset Distribution{% endblock %}
{% block header_title %}Roulette <button data-toggle="collapse" href="#collapsableLinks" aria-expanded="false" aria-controls="collapsableLinks" class="btn btn-flat"><i class="fa-solid fa-ellipsis"></i></button>{% endblock %}
{% block header_breadcrumb %}Distribution / Roulette{% endblock %}
{% block body_content %}
    {# Checkout buttons #}
    <div class="collapse container-fluid shadow pt-2 mb-5 bg-white rounded" id="collapsableLinks">
        <a href="{{ path('app_asset_distribution') }}" class="btn btn-app">
            <i class="fas fa-right-from-bracket"></i>
            Distribute Asset
        </a>
        <a href="{{ path('app_distribute_revoke') }}" class="btn btn-app">
            <i class="fas fa-rectangle-list"></i>
            Distribution History/Revoke
        </a>
        <a href="{{ path('app_asset_distribution_roulette') }}" class="btn btn-app">
            <i class="fas fa-diagram-next"></i>
            Roulette
        </a>
    </div>
    {# End checkout buttons #}
    <div id="rouletteWrapper">
        <ul class="list-group text-center">
            {% for asset in assets %}
                <li class="list-group-item">
                    {% if loop.first %}
                        <h1><a href="{{ path('app_distribute_clear', {'id': asset.id}) }}">{{ asset.location ?: 'No Location' }}</a></h1>
                    {% else %}
                        <h4><a href="{{ path('app_distribute_clear', {'id': asset.id}) }}">{{ asset.location ?: 'No Location' }}</a></h4>
                    {% endif %}
                    {{ asset.assettag }}<br />
                    {{ asset.userSurname }}, {{ asset.userFirstName }}
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock %}
{% block head_custom_javascript %}
    <script type="text/javascript">
        $(document).ready(function() {
            let timeout = setInterval(reloadRouletteWrapper, 2000);
            function reloadRouletteWrapper() {
                $('#rouletteWrapper').load(window.location.href + " #rouletteWrapper");
            }
        });
    </script>
{% endblock %}