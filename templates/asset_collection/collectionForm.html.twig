<!DOCTYPE html>
<html>
<head>
    <title>Asset Collection</title>
    {# <style>
        .form-box {
            margin: 100px auto;
            padding: 40px;
            width: 70%;
            min-width: 300px;
            background-color: #ffffff;
        }

        input {
            padding: 10px;
            width: 100%;
            font-size: 17px;
            font-family: Raleway;
            border: 1px solid #aaaaaa;
        }

        input.invalid {
            background-color: #ffdddd;
        }

        .formBox .tab {
            display: none;
        }

        .step {
            height: 15px;
            width: 15px;
            margin: 0 2px;
            background-color: #bbbbbb;
            border: none;
            border-radius: 50%;
            display: inline-block;
            opacity: 0.5;
        }

        .step.active {
            opacity: 1;
        }

        .step.finish {
            background-color: #04AA6D;
        }
    </style> #}

    <style>
        h1 {
            text-align: center;
        }
        h2 {
            margin: 0;
        }
        #multi-step-form-container {
            margin-top: 5rem;
        }
        .text-center {
            text-align: center;
        }
        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }
        .pl-0 {
            padding-left: 0;
        }
        .button {
            padding: 0.7rem 1.5rem;
            border: 1px solid #4361ee;
            background-color: #4361ee;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
        }
        .submit-btn {
            border: 1px solid #0e9594;
            background-color: #0e9594;
        }
        .mt-3 {
            margin-top: 2rem;
        }
        .d-none {
            display: none;
        }
        .form-step {
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 20px;
            padding: 3rem;
        }
        .font-normal {
            font-weight: normal;
        }
        ul.form-stepper {
            counter-reset: section;
            margin-bottom: 3rem;
        }
        ul.form-stepper .form-stepper-circle {
            position: relative;
        }
        ul.form-stepper .form-stepper-circle span {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translateY(-50%) translateX(-50%);
        }
        .form-stepper-horizontal {
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-pack: justify;
            -ms-flex-pack: justify;
            justify-content: space-between;
        }
        ul.form-stepper > li:not(:last-of-type) {
            margin-bottom: 0.625rem;
            -webkit-transition: margin-bottom 0.4s;
            -o-transition: margin-bottom 0.4s;
            transition: margin-bottom 0.4s;
        }
        .form-stepper-horizontal > li:not(:last-of-type) {
            margin-bottom: 0 !important;
        }
        .form-stepper-horizontal li {
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            -webkit-box-align: start;
            -ms-flex-align: start;
            align-items: start;
            -webkit-transition: 0.5s;
            transition: 0.5s;
        }
        .form-stepper-horizontal li:not(:last-child):after {
            position: relative;
            -webkit-box-flex: 1;
            -ms-flex: 1;
            flex: 1;
            height: 1px;
            content: "";
            top: 32%;
        }
        .form-stepper-horizontal li:after {
            background-color: #dee2e6;
        }
        .form-stepper-horizontal li.form-stepper-completed:after {
            background-color: #4da3ff;
        }
        .form-stepper-horizontal li:last-child {
            flex: unset;
        }
        ul.form-stepper li a .form-stepper-circle {
            display: inline-block;
            width: 40px;
            height: 40px;
            margin-right: 0;
            line-height: 1.7rem;
            text-align: center;
            background: rgba(0, 0, 0, 0.38);
            border-radius: 50%;
        }
        .form-stepper .form-stepper-active .form-stepper-circle {
            background-color: #4361ee !important;
            color: #fff;
        }
        .form-stepper .form-stepper-active .label {
            color: #4361ee !important;
        }
        .form-stepper .form-stepper-active .form-stepper-circle:hover {
            background-color: #4361ee !important;
            color: #fff !important;
        }
        .form-stepper .form-stepper-unfinished .form-stepper-circle {
            background-color: #f8f7ff;
        }
        .form-stepper .form-stepper-completed .form-stepper-circle {
            background-color: #0e9594 !important;
            color: #fff;
        }
        .form-stepper .form-stepper-completed .label {
            color: #0e9594 !important;
        }
        .form-stepper .form-stepper-completed .form-stepper-circle:hover {
            background-color: #0e9594 !important;
            color: #fff !important;
        }
        .form-stepper .form-stepper-active span.text-muted {
            color: #fff !important;
        }
        .form-stepper .form-stepper-completed span.text-muted {
            color: #fff !important;
        }
        .form-stepper .label {
            font-size: 1rem;
            margin-top: 0.5rem;
        }
        .form-stepper a {
            cursor: default;
        }
    </style>
</head>
<body>
    <div>
        <h1>Asset Collection</h1>
        <div id="multi-step-form-container">
            <!-- Form Steps / Progress Bar -->
            <ul class="form-stepper form-stepper-horizontal text-center mx-auto pl-0">
                <!-- Step 1 -->
                <li class="form-stepper-active text-center form-stepper-list" step="1">
                    <a class="mx-2">
                        <span class="form-stepper-circle">
                            <span>1</span>
                        </span>
                        <div class="label">Select Storage</div>
                    </a>
                </li>
                <!-- Step 2 -->
                <li class="form-stepper-unfinished text-center form-stepper-list" step="2">
                    <a class="mx-2">
                        <span class="form-stepper-circle text-muted">
                            <span>2</span>
                        </span>
                        <div class="label text-muted">User Assignment</div>
                    </a>
                </li>
                <!-- Step 3 -->
                <li class="form-stepper-unfinished text-center form-stepper-list" step="3">
                    <a class="mx-2">
                        <span class="form-stepper-circle text-muted">
                            <span>3</span>
                        </span>
                        <div class="label text-muted">Asset Collection</div>
                    </a>
                </li>
            </ul>
            <!-- Step Wise Form Content -->
            {{ form_start(collectionForm, { 'attr': { 'id': 'userAccountSetupForm', 'name': 'userAccountSetupForm', 'enctype': 'multipart/form-data' }}) }}
                <!-- Step 1 Content -->
                <section id="step-1" class="form-step">
                    <h2 class="font-normal">Select Storage</h2>
                    <!-- Step 1 input fields -->
                    <div class="mt-3">
                        {{ form_widget(collectionForm.storage) }}
                    </div>
                    <div class="mt-3">
                        <button class="button btn-navigate-form-step" type="button" step_number="2">Next</button>
                    </div>
                </section>
                <!-- Step 2 Content, default hidden on page load. -->
                <section id="step-2" class="form-step d-none">
                    <h2 class="font-normal">User Assignemtn</h2>
                    <!-- Step 2 input fields -->
                    <div class="mt-3">
                        {{ form_widget(collectionForm.user) }}
                    </div>
                    <div class="mt-3">
                        <button class="button btn-navigate-form-step" type="button" step_number="1">Prev</button>
                        <button class="button btn-navigate-form-step" type="button" step_number="3">Next</button>
                    </div>
                </section>
                <!-- Step 3 Content, default hidden on page load. -->
                <section id="step-3" class="form-step d-none">
                    <h2 class="font-normal">Asset Collection</h2>
                    <!-- Step 3 input fields -->
                    <div class="mt-3">
                        {{ form_widget(collectionForm.asset) }}
                    </div>
                    <div class="mt-3">
                        <button class="button btn-navigate-form-step" type="button" step_number="2">Prev</button>
                        <button class="button submit-btn" type="submit">Save</button>
                    </div>
                </section>
            {{ form_end(collectionForm) }}
        </div>
    </div>

    <script type="text/javascript">
        /**
        * Define a function to navigate betweens form steps.
        * It accepts one parameter. That is - step number.
        */
        const navigateToFormStep = (stepNumber) => {
            /**
            * Hide all form steps.
            */
            document.querySelectorAll(".form-step").forEach((formStepElement) => {
                formStepElement.classList.add("d-none");
            });
            /**
            * Mark all form steps as unfinished.
            */
            document.querySelectorAll(".form-stepper-list").forEach((formStepHeader) => {
                formStepHeader.classList.add("form-stepper-unfinished");
                formStepHeader.classList.remove("form-stepper-active", "form-stepper-completed");
            });
            /**
            * Show the current form step (as passed to the function).
            */
            document.querySelector("#step-" + stepNumber).classList.remove("d-none");
            /**
            * Select the form step circle (progress bar).
            */
            const formStepCircle = document.querySelector('li[step="' + stepNumber + '"]');
            /**
            * Mark the current form step as active.
            */
            formStepCircle.classList.remove("form-stepper-unfinished", "form-stepper-completed");
            formStepCircle.classList.add("form-stepper-active");
            /**
            * Loop through each form step circles.
            * This loop will continue up to the current step number.
            * Example: If the current step is 3,
            * then the loop will perform operations for step 1 and 2.
            */
            for (let index = 0; index < stepNumber; index++) {
                /**
                * Select the form step circle (progress bar).
                */
                const formStepCircle = document.querySelector('li[step="' + index + '"]');
                /**
                * Check if the element exist. If yes, then proceed.
                */
                if (formStepCircle) {
                    /**
                    * Mark the form step as completed.
                    */
                    formStepCircle.classList.remove("form-stepper-unfinished", "form-stepper-active");
                    formStepCircle.classList.add("form-stepper-completed");
                }
            }
        };
        /**
        * Select all form navigation buttons, and loop through them.
        */
        document.querySelectorAll(".btn-navigate-form-step").forEach((formNavigationBtn) => {
            /**
            * Add a click event listener to the button.
            */
            formNavigationBtn.addEventListener("click", () => {
                /**
                * Get the value of the step.
                */
                const stepNumber = parseInt(formNavigationBtn.getAttribute("step_number"));
                /**
                * Call the function to navigate to the target form step.
                */
                navigateToFormStep(stepNumber);
            });
        });
    </script>
</body>
</html>
    {#     
    <div class="tab">
        {# {{ form(collectionForm) }}
        tab 1
    </div>
    <div class="tab">
        tab 2
    </div>
    <div class="tab">
        tab 3
    </div>
    <div style="overflow:auto;">
        <div style="float:right;">
            <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
            <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
        </div>
    </div>
    <div style="text-align:center;margin-top:40px;">
        <span class="step"></span>
        <span class="step"></span>
        <span class="step"></span>
    </div> #}
{# 
<script type="text/javascript">
    var currentTab = 0;
    showTab(currentTab);

    function showTab(n) {
        var x = document.getElementsByClassName('tab');
        x[n].style.display = 'block';

        if (n == 0) {
            document.getElementById('prevBtn').style.display = 'none';
        } else {
            document.getElementById('prevBtn').style.display = 'inline';
        }

        if (n == (x.length - 1)) {
            document.getElementById('nextBtn').innerHTML = 'Submit';
        } else {
            document.getElementById('nextBtn').innerHTML = 'Next';
        }

        fixStepIndicator(n)
    }

    function nextPrev(n) {
        var x = document.getElementsByClassName('tab');

        if (n == 1 && !validateForm()) return false;

        x[currentTab].style.display = 'none';

        currentTab = currentTab + n;

        if (currentTab >= x.length) {
            document.getElementById('collectionForm').submit();
            return false;
        }

        showTab(currentTab);
    }

    function validateForm() {
        var x,y,i, valid = true;

        x = document.getElementsByClassName('tab');
        y = x[currentTab].getElementsByTagName('input');

        for (i = 0; i < y.length; i++) {
            if (y[i].value == '') {
                y[i].className += ' invalid';
                valid = false;
            }
        }

        if (valid) {
            document.getElementsByClassName('step')[currentTab].className += ' finish';
        }

        return valid;
    }

    function fixStepIndicator(n) {
        var i, x = document.getElementsByClassName('step');

        for (i = 0; i < x.length; i++) {
            x[i].className = x[i].className.replace(' active', '');
        }

        x[n].className += ' active';
    }
</script> #}